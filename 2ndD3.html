<!doctype html>
<meta charset="utf-8">
<html>
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8">
  </script>
  <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.19/topojson.min.js"></script>
  <style>
/*path.countries {
  stroke-width: 1;
  stroke: black;
  opacity: .5;
  fill: red;
}

circle.cities {
  stroke-width: 1;
  stroke: black;
  fill: white;
}

circle.centroid {
  fill: red;
  pointer-events: none;
}

rect.bbox {
  fill: none;
  stroke-dasharray: 5 5;
  stroke: black;
  stroke-width: 2;
  pointer-events: none;
}

path.graticule {
  fill: none;
  stroke-width: 1;
  stroke: black;
}

path.graticule.outline {
  stroke: black;
}*/
  </style>
</head>
<body>
<!--   <div class='states'>
  </div> -->
  <script>
var ref = new Firebase('https://statesdata.firebaseio.com');
ref.on('value', function(data) {
  var States = data.val();
  dataViz(States)}, function (e) {
  console.log("The read failed: " + e.code);
});
function dataViz(incomingData){
  console.log(incomingData);
  // d3.select("body").selectAll("div.states")
  //   .data(incomingData)
  //   .enter()
  //   .append("div")
  //   .attr("class", "states")
  //   .html(function(d, i) { return d.State; });
}

var width = 960,
    height = 500;

var projection = d3.geo.albersUsa()
    .scale(1000)
    .translate([width / 2, height / 2]);

var path = d3.geo.path()
    .projection(projection);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);
var geoData = new Firebase('https://geojsonstates.firebaseio.com/');
geoData.on('value', function(data) {
  us = data.val();
  console.log(us);
  svg.insert("path", ".graticule")
      .datum(topojson.feature(us, us.objects/cb_2014_us_nation_20m))
      .attr("class", "land")
      .attr("d", path);

  // svg.insert("path", ".graticule")
  //     .datum(topojson.mesh(us, us.objects.counties, function(a, b) { return a !== b && !(a.id / 1000 ^ b.id / 1000); }))
  //     .attr("class", "county-boundary")
  //     .attr("d", path);

  // svg.insert("path", ".graticule")
  //     .datum(topojson.mesh(us, us.objects.states, function(a, b) { return a !== b; }))
  //     .attr("class", "state-boundary")
  //     .attr("d", path);
})

// d3.json("us.json", function(error, us) {
//   if (error) throw error;


// });

d3.select(self.frameElement).style("height", height + "px");
//d3.selectAll("div.states")on("hover").append("div").html(function(d,i){return d.Admitted});
//d3.csv("cities.csv",function(data) {console.log(data)});
//d3.json("tweets.json",function(data) {console.log(data)});
  </script>
</body>
</html>